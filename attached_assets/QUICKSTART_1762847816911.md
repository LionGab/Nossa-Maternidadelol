# NAT-IA Quick Start

Comece a usar NAT-IA em 5 minutos!

## 1. Importa√ß√£o B√°sica

```typescript
import {
  // Os 9 m√≥dulos principais
  chatEmpatico,
  classificarSentimento,
  detectarRisco,
  analisarRespostas,
  resumirConteudo,
  analisarMensagem,
  recomendarConteudo,
  criarMicroObjetivo,
  extrairRotulos,
  gerarPushNotification,

  // Tipos
  ChatContext,
  RiskAssessment,
  ModerationAnalysis,

  // Config
  NATHIA_CONFIG,

  // Health check
  healthCheck,
} from '@/services/nathia';
```

## 2. Casos de Uso Mais Comuns

### Chat com Usu√°ria

```typescript
import { chatEmpatico, createChatContext } from '@/services/nathia';

// Criar contexto
const contexto = createChatContext('user_123', {
  user_profile: { stage: 'postpartum', concerns: ['sono'] },
});

// Processar mensagem
const resposta = await chatEmpatico('Meu beb√™ n√£o dorme e estou exausta', contexto);

// Usar resposta
console.log(resposta.resposta); // Texto da resposta
console.log(resposta.acoes); // A√ß√µes sugeridas
console.log(resposta.next_step); // Pr√≥ximo passo
```

### Detectar Risco

```typescript
import { detectarRisco, acionarSOS } from '@/services/nathia';

const mensagem = 'N√£o aguento mais essa situa√ß√£o';

// Detectar
const risco = await detectarRisco(mensagem);

// Agir se necess√°rio
if (risco.nivel === 'risk') {
  const sos = await acionarSOS('user_123', { riskAssessment: risco });

  // Exibir recursos
  showEmergencyContacts(sos.support_contacts);
  // CVV 188, SAMU 192, etc
}
```

### Moderar Coment√°rio

```typescript
import { analisarMensagem, decidirAcao } from '@/services/nathia';

const comentario = 'Voc√™ deveria fazer X...';

// Analisar
const analise = await analisarMensagem(comentario);

// Decidir
const acao = decidirAcao(analise);

switch (acao) {
  case 'approve':
    await publicarComentario(comentario);
    break;
  case 'reject':
    mostrarFeedback('Coment√°rio cont√©m julgamento');
    break;
  case 'review':
    enviarParaModeradora(comentario, analise);
    break;
}
```

### Recomendar Conte√∫do

```typescript
import { recomendarConteudo } from '@/services/nathia';

const recs = await recomendarConteudo('user_123', {
  current_stage: 'mid',
  current_mood: 'worried',
  recent_activity: ['sono', 'amamentacao'],
});

// Exibir top 5
recs.itens.forEach((item) => {
  console.log(`${item.title} (${item.match_score})`);
  console.log(`Motivo: ${item.reason}`);
});
```

### Curar Conte√∫do

```typescript
import { resumirConteudo, criarCincoMinutos, gerarChecklist } from '@/services/nathia';

const artigo = '[artigo longo...]';

// Criar vers√µes
const resumo = await resumirConteudo(artigo);
const cincoMin = await criarCincoMinutos(artigo);
const checklist = await gerarChecklist(artigo);

// Publicar m√∫ltiplas vers√µes
await publicar({
  completo: artigo,
  resumo: resumo.resumo,
  rapida: cincoMin.bullets,
  checklist: checklist.items,
});
```

## 3. Edge Function Simples

```typescript
// supabase/functions/nathia-chat/index.ts
import { serve } from 'https://deno.land/std@0.168.0/http/server.ts';
import { chatEmpatico, buildChatPrompt } from '@/services/nathia';
import { GoogleGenerativeAI } from '@google/generative-ai';

serve(async (req) => {
  try {
    const { mensagem, contexto } = await req.json();

    // Preparar com NAT-IA
    const setup = await chatEmpatico(mensagem, contexto);
    const prompt = buildChatPrompt(mensagem, contexto);

    // Chamar IA
    const genAI = new GoogleGenerativeAI(Deno.env.get('GEMINI_API_KEY')!);
    const model = genAI.getGenerativeModel({ model: 'gemini-pro' });
    const result = await model.generateContent(prompt);

    // Retornar
    return new Response(
      JSON.stringify({
        ...setup,
        resposta: result.response.text(),
      }),
      {
        headers: { 'Content-Type': 'application/json' },
      }
    );
  } catch (error) {
    return new Response(JSON.stringify({ error: error.message }), {
      status: 500,
      headers: { 'Content-Type': 'application/json' },
    });
  }
});
```

## 4. Health Check

```typescript
import { healthCheck } from '@/services/nathia';

// Verificar no startup
const health = healthCheck();

if (health.status !== 'healthy') {
  console.error('NAT-IA n√£o est√° saud√°vel:', health);
  // Alertar equipe
}

console.log('NAT-IA', health.version, 'OK');
```

## 5. Configura√ß√£o Custom

```typescript
import { NATHIA_CONFIG, validateConfig } from '@/services/nathia';

// Ajustar thresholds
NATHIA_CONFIG.moderacao.judgement_threshold = 0.25; // Mais rigoroso
NATHIA_CONFIG.triagem.threshold_risco_alto = 0.75;

// Validar
if (!validateConfig()) {
  throw new Error('Configura√ß√£o inv√°lida');
}
```

## 6. Analytics Seguro

```typescript
import { extrairRotulos, anonimizar, validarConformidadeLGPD } from '@/services/nathia';

async function salvarInteracao(userMessage: string) {
  // Extrair informa√ß√µes
  const labels = await extrairRotulos(userMessage);

  // Criar dados
  const dados = {
    user_id: 'user_123', // Ser√° removido
    message: userMessage,
    labels,
    timestamp: new Date(),
  };

  // Anonimizar
  const dadosSeguros = anonimizar(dados);

  // Validar LGPD
  const validacao = validarConformidadeLGPD(dadosSeguros);

  if (validacao.compliant) {
    await salvarNoBanco(dadosSeguros);
  } else {
    console.error('Dados n√£o conformes:', validacao.violations);
  }
}
```

## 7. Fluxo Completo T√≠pico

```typescript
async function processarMensagemUsuaria(userId: string, mensagem: string) {
  // 1. Triagem paralela
  const [sentimento, risco] = await Promise.all([classificarSentimento(mensagem), detectarRisco(mensagem)]);

  // 2. Chat normal
  const contexto = await getUserContext(userId);
  const resposta = await chatEmpatico(mensagem, contexto);

  // 3. Recomenda√ß√µes
  const recomendacoes = await recomendarConteudo(userId, {
    current_mood: sentimento.valence,
  });

  // 4. Se risco, protocolo especial
  if (risco.nivel === 'risk') {
    await acionarSOS(userId, { mensagem, riskAssessment: risco });
  }

  // 5. Analytics (anonimizado)
  const labels = await extrairRotulos(mensagem);
  const dados = anonimizar({ message: mensagem, labels, timestamp: new Date() });
  await saveAnalytics(dados);

  // 6. Retornar tudo
  return {
    resposta: resposta.resposta,
    acoes: resposta.acoes,
    recomendacoes: recomendacoes.itens.slice(0, 3),
    emergency: risco.nivel === 'risk' ? risco.suggested_resources : undefined,
  };
}
```

## 8. Error Handling

```typescript
import { ValidationError, NathiaError } from '@/services/nathia';

try {
  await chatEmpatico('', contexto);
} catch (error) {
  if (error instanceof ValidationError) {
    // Erro de valida√ß√£o - mostrar para usu√°ria
    showUserError('Por favor, digite uma mensagem');
  } else if (error instanceof NathiaError) {
    // Erro interno NAT-IA - logar
    console.error('Erro NAT-IA:', error.code, error.details);
    showUserError('Algo deu errado. Tente novamente');
  } else {
    // Erro desconhecido
    console.error('Erro inesperado:', error);
    throw error;
  }
}
```

## 9. Testes R√°pidos

```typescript
// chat.test.ts
import { chatEmpatico, createChatContext } from '@/services/nathia';

describe('Chat', () => {
  it('deve processar mensagem', async () => {
    const ctx = createChatContext('test_user');
    const res = await chatEmpatico('Ol√°', ctx);

    expect(res.resposta).toBeDefined();
    expect(res.acoes).toBeInstanceOf(Array);
  });
});
```

## 10. Debugging

```typescript
import { NATHIA_CONFIG } from '@/services/nathia';

// Ativar logs detalhados
NATHIA_CONFIG.geral.log_level = 'debug';

// Ver configura√ß√£o atual
console.log('Keywords risco:', NATHIA_CONFIG.triagem.keywords_risco_alto);
console.log('Thresholds modera√ß√£o:', NATHIA_CONFIG.moderacao);

// Testar prompt
import { buildChatPrompt } from '@/services/nathia';
const prompt = buildChatPrompt('teste', 'contexto');
console.log('Prompt gerado:', prompt);
```

---

## Refer√™ncias R√°pidas

### M√≥dulos

1. **chat** - Conversa emp√°tica
2. **triagem** - Sentimento + risco
3. **onboarding** - Perfil + starter pack
4. **curadoria** - Resumo + checklist
5. **moderacao** - Julgamento + toxicidade
6. **recomendacoes** - Conte√∫do + grupos + h√°bitos
7. **habitos** - Micro-objetivos + motiva√ß√£o
8. **analytics** - R√≥tulos + m√©tricas (sem PII)
9. **copys** - Push + email + App Store

### Recursos

- üìñ [README.md](./README.md) - Documenta√ß√£o completa
- üí° [EXAMPLES.md](./EXAMPLES.md) - Exemplos pr√°ticos
- üìä [NATHIA_IMPLEMENTATION_REPORT.md](../../NATHIA_IMPLEMENTATION_REPORT.md) - Relat√≥rio t√©cnico

### Links √öteis

- **Configura√ß√£o:** `src/services/nathia/config.ts`
- **Tipos:** `src/services/nathia/types.ts`
- **Prompts:** `src/services/nathia/prompts.ts`

---

## Suporte

D√∫vidas? Veja:

1. README.md para conceitos
2. EXAMPLES.md para c√≥digo
3. Types para refer√™ncia de API

**Pronto para come√ßar!** üöÄ

NAT-IA v1.0.0
